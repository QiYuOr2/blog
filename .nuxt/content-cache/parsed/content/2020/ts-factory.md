{"parsed":{"_path":"/2020/ts-factory","_dir":"2020","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"TypeScript实现设计模式——工厂模式","description":"上回用 typescript 实现了单例模式，这回来实现工厂模式。工厂模式又分为简单工厂模式、工厂方法模式以及抽象工厂模式。","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上回用 typescript 实现了单例模式，这回来实现工厂模式。工厂模式又分为简单工厂模式、工厂方法模式以及抽象工厂模式。"}]},{"type":"element","tag":"h2","props":{"id":"简单工厂模式"},"children":[{"type":"text","value":"简单工厂模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"简单工厂模式通常在业务比较简单的情况下使用，它有三个部分组成：工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"class PizzaFactory {\n  /**\n   * 静态工厂方法\n   * @param pizzaType 限制传入的参数为类，而非类的实例\n   */\n  public static createPizza(pizzaType: new () => Pizza): Pizza {\n    let pizza = null;\n\n    try {\n      pizza = new pizzaType();\n    } catch (e) {\n      console.error('Create failed!');\n    }\n\n    return pizza;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class PizzaFactory {\n  /**\n   * 静态工厂方法\n   * @param pizzaType 限制传入的参数为类，而非类的实例\n   */\n  public static createPizza(pizzaType: new () => Pizza): Pizza {\n    let pizza = null;\n\n    try {\n      pizza = new pizzaType();\n    } catch (e) {\n      console.error('Create failed!');\n    }\n\n    return pizza;\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let pizza = PizzaFactory.createPizza(KFCPizza);\npizza.show();\n\npizza = PizzaFactory.createPizza(MCPizza);\npizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let pizza = PizzaFactory.createPizza(KFCPizza);\npizza.show();\n\npizza = PizzaFactory.createPizza(MCPizza);\npizza.show();\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"工厂方法模式"},"children":[{"type":"text","value":"工厂方法模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"正常情况下，简单工厂模式每次增加新的产品都需要在工厂类中增加对应的逻辑，这样就违背了开闭原则（但因为 ts 和我举的例子的原因体现不出这个缺点）。工厂方法模式就解决了这个问题，同时它能更好的解决复杂的业务环境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"工厂方法模式具有四个部分：抽象工厂类、具体工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class PizzaFactory {\n  public abstract createPizza(): Pizza;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class PizzaFactory {\n  public abstract createPizza(): Pizza;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new KFCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nclass MCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new MCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new KFCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nclass MCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new MCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let factory: PizzaFactory = new KFCPizzaFactory();\nlet pizza = factory.createPizza();\npizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let factory: PizzaFactory = new KFCPizzaFactory();\nlet pizza = factory.createPizza();\npizza.show();\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们需要增加新的产品时，只需要增加对应的工厂类而不需要更改原本工厂类内部的逻辑，完全符合了开闭原则。"}]},{"type":"element","tag":"h2","props":{"id":"抽象工厂模式"},"children":[{"type":"text","value":"抽象工厂模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"学习抽象工厂模式之前，首先要先了解两个概念："},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品等级结构"}]},{"type":"text","value":"和"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品族"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品等级结构"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"产品等级结构即产品的继承结构，例如抽象的披萨类和具体某品牌的披萨类之间就构成了一个产品等级结构。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品族"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"位于不同产品等级结构中的一组产品，功能相关联的产品组成的家族，如 KFC 水果披萨、MC 水果披萨都是水果披萨，就可以放到同一个产品族中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抽象工厂模式具有和工厂方法模式一样的四个部分：抽象工厂类、具体工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"// KFC产品父类\nabstract class KFCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n\n// MC产品父类\nabstract class MCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// KFC产品父类\nabstract class KFCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n\n// MC产品父类\nabstract class MCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"// 具体KFCPizza类\nclass KFCFruitPizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCFruitPizza!');\n  }\n}\n\nclass KFCCheesePizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCCheesePizza!');\n  }\n}\n\n// 具体KFCPizza类\nclass MCFruitPizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCFruitPizza!');\n  }\n}\n\nclass MCCheesePizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCCheesePizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 具体KFCPizza类\nclass KFCFruitPizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCFruitPizza!');\n  }\n}\n\nclass KFCCheesePizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCCheesePizza!');\n  }\n}\n\n// 具体KFCPizza类\nclass MCFruitPizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCFruitPizza!');\n  }\n}\n\nclass MCCheesePizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCCheesePizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class PizzaFactory {\n  public abstract createKFCPizza(): KFCPizza;\n  public abstract createMCPizza(): MCPizza;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class PizzaFactory {\n  public abstract createKFCPizza(): KFCPizza;\n  public abstract createMCPizza(): MCPizza;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"// 水果披萨工厂\nclass FruitPizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// 芝士披萨工厂\nclass CheesePizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 水果披萨工厂\nclass FruitPizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// 芝士披萨工厂\nclass CheesePizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let factory: PizzaFactory = new CheesePizzaFactory();\nlet cheesePizza = factory.createKFCPizza();\ncheesePizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let factory: PizzaFactory = new CheesePizzaFactory();\nlet cheesePizza = factory.createKFCPizza();\ncheesePizza.show();\n"}]}]}]}]},"date":"2020/03/20 11:47:31","tags":["TypeScript","设计模式"],"category":"技术","summary":"上回用typescript实现了单例模式，这回来实现工厂模式。工厂模式又分为简单工厂模式、工厂方法模式以及抽象工厂模式。","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"上回用 typescript 实现了单例模式，这回来实现工厂模式。工厂模式又分为简单工厂模式、工厂方法模式以及抽象工厂模式。"}]},{"type":"element","tag":"h2","props":{"id":"简单工厂模式"},"children":[{"type":"text","value":"简单工厂模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"简单工厂模式通常在业务比较简单的情况下使用，它有三个部分组成：工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"class PizzaFactory {\n  /**\n   * 静态工厂方法\n   * @param pizzaType 限制传入的参数为类，而非类的实例\n   */\n  public static createPizza(pizzaType: new () => Pizza): Pizza {\n    let pizza = null;\n\n    try {\n      pizza = new pizzaType();\n    } catch (e) {\n      console.error('Create failed!');\n    }\n\n    return pizza;\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class PizzaFactory {\n  /**\n   * 静态工厂方法\n   * @param pizzaType 限制传入的参数为类，而非类的实例\n   */\n  public static createPizza(pizzaType: new () => Pizza): Pizza {\n    let pizza = null;\n\n    try {\n      pizza = new pizzaType();\n    } catch (e) {\n      console.error('Create failed!');\n    }\n\n    return pizza;\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let pizza = PizzaFactory.createPizza(KFCPizza);\npizza.show();\n\npizza = PizzaFactory.createPizza(MCPizza);\npizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let pizza = PizzaFactory.createPizza(KFCPizza);\npizza.show();\n\npizza = PizzaFactory.createPizza(MCPizza);\npizza.show();\n"}]}]}]},{"type":"element","tag":"h2","props":{"id":"工厂方法模式"},"children":[{"type":"text","value":"工厂方法模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"正常情况下，简单工厂模式每次增加新的产品都需要在工厂类中增加对应的逻辑，这样就违背了开闭原则（但因为 ts 和我举的例子的原因体现不出这个缺点）。工厂方法模式就解决了这个问题，同时它能更好的解决复杂的业务环境。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"工厂方法模式具有四个部分：抽象工厂类、具体工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class Pizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizza extends Pizza {\n  public show(): void {\n    console.log('This is KFCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCPizza!');\n  }\n}\n\nclass MCPizza extends Pizza {\n  public show(): void {\n    console.log('This is MCPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCPizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class PizzaFactory {\n  public abstract createPizza(): Pizza;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class PizzaFactory {\n  public abstract createPizza(): Pizza;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"class KFCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new KFCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nclass MCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new MCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"class KFCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new KFCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nclass MCPizzaFactory extends PizzaFactory {\n  public createPizza(): Pizza {\n    try {\n      return new MCPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let factory: PizzaFactory = new KFCPizzaFactory();\nlet pizza = factory.createPizza();\npizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let factory: PizzaFactory = new KFCPizzaFactory();\nlet pizza = factory.createPizza();\npizza.show();\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当我们需要增加新的产品时，只需要增加对应的工厂类而不需要更改原本工厂类内部的逻辑，完全符合了开闭原则。"}]},{"type":"element","tag":"h2","props":{"id":"抽象工厂模式"},"children":[{"type":"text","value":"抽象工厂模式"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"学习抽象工厂模式之前，首先要先了解两个概念："},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品等级结构"}]},{"type":"text","value":"和"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品族"}]}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品等级结构"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"产品等级结构即产品的继承结构，例如抽象的披萨类和具体某品牌的披萨类之间就构成了一个产品等级结构。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"产品族"}]},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"位于不同产品等级结构中的一组产品，功能相关联的产品组成的家族，如 KFC 水果披萨、MC 水果披萨都是水果披萨，就可以放到同一个产品族中。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抽象工厂模式具有和工厂方法模式一样的四个部分：抽象工厂类、具体工厂类、抽象产品类、具体产品类。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象产品类"}]}]},{"type":"element","tag":"code","props":{"code":"// KFC产品父类\nabstract class KFCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n\n// MC产品父类\nabstract class MCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// KFC产品父类\nabstract class KFCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n\n// MC产品父类\nabstract class MCPizza {\n  public abstract show(): void;\n  public abstract cut(): void;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体产品类"}]}]},{"type":"element","tag":"code","props":{"code":"// 具体KFCPizza类\nclass KFCFruitPizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCFruitPizza!');\n  }\n}\n\nclass KFCCheesePizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCCheesePizza!');\n  }\n}\n\n// 具体KFCPizza类\nclass MCFruitPizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCFruitPizza!');\n  }\n}\n\nclass MCCheesePizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCCheesePizza!');\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 具体KFCPizza类\nclass KFCFruitPizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCFruitPizza!');\n  }\n}\n\nclass KFCCheesePizza extends KFCPizza {\n  public show(): void {\n    console.log('This is KFCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut KFCCheesePizza!');\n  }\n}\n\n// 具体KFCPizza类\nclass MCFruitPizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCFruitPizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCFruitPizza!');\n  }\n}\n\nclass MCCheesePizza extends MCPizza {\n  public show(): void {\n    console.log('This is MCCheesePizza!');\n  }\n  public cut(): void {\n    console.log('Cut MCCheesePizza!');\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"抽象工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"abstract class PizzaFactory {\n  public abstract createKFCPizza(): KFCPizza;\n  public abstract createMCPizza(): MCPizza;\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"abstract class PizzaFactory {\n  public abstract createKFCPizza(): KFCPizza;\n  public abstract createMCPizza(): MCPizza;\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"具体工厂类"}]}]},{"type":"element","tag":"code","props":{"code":"// 水果披萨工厂\nclass FruitPizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// 芝士披萨工厂\nclass CheesePizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 水果披萨工厂\nclass FruitPizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCFruitPizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\n// 芝士披萨工厂\nclass CheesePizzaFactory extends PizzaFactory {\n  public createKFCPizza(): KFCPizza {\n    try {\n      return new KFCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  public createMCPizza(): MCPizza {\n    try {\n      return new MCCheesePizza();\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"测试"}]}]},{"type":"element","tag":"code","props":{"code":"let factory: PizzaFactory = new CheesePizzaFactory();\nlet cheesePizza = factory.createKFCPizza();\ncheesePizza.show();\n","language":"typescript"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"let factory: PizzaFactory = new CheesePizzaFactory();\nlet cheesePizza = factory.createKFCPizza();\ncheesePizza.show();\n"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"简单工厂模式","depth":2,"text":"简单工厂模式"},{"id":"工厂方法模式","depth":2,"text":"工厂方法模式"},{"id":"抽象工厂模式","depth":2,"text":"抽象工厂模式"}]}},"_type":"markdown","_id":"content:2020:ts-factory.md","_source":"content","_file":"2020/ts-factory.md","_extension":"md"},"hash":"OLtEfOrWqi"}