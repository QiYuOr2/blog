{"parsed":{"_path":"/2020/node-spider-csdn","_dir":"2020","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"nodejs爬虫--抓取CSDN某用户全部文章","description":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。"}]},{"type":"element","tag":"h2","props":{"id":"准备工作"},"children":[{"type":"text","value":"准备工作"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"node.js 爬虫肯定要先安装"},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"环境"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个文件夹"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在该文件夹打开命令行，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm init"}]},{"type":"text","value":"初始化项目"}]}]},{"type":"element","tag":"h2","props":{"id":"正式开始"},"children":[{"type":"text","value":"正式开始"}]},{"type":"element","tag":"h3","props":{"id":"安装依赖"},"children":[{"type":"text","value":"安装依赖"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"express 用来搭建一个简单 http 服务器，也可以使用 node 原生 api"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cheerio 相当于 node 版的 jQuery，用来解析页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"superagent 用来请求目标页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"eventproxy 解决同时处理多个页面的问题"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install express cheerio superagent eventproxy "}]},{"type":"text","value":"来安装依赖包，当然你也可以用别的方法。"}]},{"type":"element","tag":"h3","props":{"id":"创建建好目录"},"children":[{"type":"text","value":"创建建好目录"}]},{"type":"element","tag":"code","props":{"code":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"创建一个-http-服务器"},"children":[{"type":"text","value":"创建一个 Http 服务器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.js"}]},{"type":"text","value":"文件中，实例化一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"对象，启动一个 Http 服务"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样就启动了一个简单的 Http 本地服务，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"后通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000"}]},{"type":"text","value":"就可以访问到这个服务器。有关 Express 的更多内容可以参考"},{"type":"element","tag":"a","props":{"href":"https://expressjs.com/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"编写csdnjs模块"},"children":[{"type":"text","value":"编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"模块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先引入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"文件并且添加路由"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后开始编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]}]},{"type":"element","tag":"h4","props":{"id":"整体结构"},"children":[{"type":"text","value":"整体结构"}]},{"type":"element","tag":"code","props":{"code":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"分析页面"},"children":[{"type":"text","value":"分析页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"整体结构写好后就要开始分析 CSDN 用户文章页面的 HTML 了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"随便找一个人的博客，经过观察发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原创文章的完整 url:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://blog.csdn.net/l1028386804/article/list/2?t=1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSDN 的文章列表是 40 篇一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分页控件是动态生成的，所以无法直接通过 HTML 解析获得"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后我们通过开发者工具查看文章列表结构，可以发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文章信息都在类名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"article-item-box"}]},{"type":"text","value":"的盒子中"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id 信息在该盒子的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data-articleid"}]},{"type":"text","value":"属性中"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一些其他的信息都很容易能查到，比如博主原创文章总数值等，可以在以后需要的时候再过来查看。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-2.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"获取所有文章页面"},"children":[{"type":"text","value":"获取所有文章页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为无法直接获得分页信息，所以我们通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"文章总数 / 每页文章数"}]},{"type":"text","value":"来获取所有的页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先获取文章的总数："}]},{"type":"element","tag":"code","props":{"code":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后利用简单的循环获取所有文章页面："}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"console.log()"}]},{"type":"text","value":"或者"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.send()"}]},{"type":"text","value":"来查看获取的网址是否正确"}]},{"type":"element","tag":"h4","props":{"id":"遍历获取所有页面的-html"},"children":[{"type":"text","value":"遍历获取所有页面的 HTML"}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"解析文章信息"},"children":[{"type":"text","value":"解析文章信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为获取到的有些文本中空格太多，所以需要用到正则表达式来去除多余的空格。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cheerio"}]},{"type":"text","value":"对于 Document 的操作和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"基本一样，所以有前端基础的可以很轻松上手。"}]},{"type":"element","tag":"code","props":{"code":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们已经获取到所有文章的信息数据，但是因为获取各个页面的文章时是并发异步进行的，所以要同时利用这些数据特殊的方法。"}]},{"type":"element","tag":"h4","props":{"id":"处理并发异步操作"},"children":[{"type":"text","value":"处理并发异步操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里我使用的是“计数器”"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"eventproxy"}]},{"type":"text","value":"，还有很多其他的方法都可以解决这个问题。"}]},{"type":"element","tag":"code","props":{"code":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，一个简单的 node 爬虫就写好了，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"启动服务后，在浏览器中输入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000/csdn/xxxx"}]},{"type":"text","value":"就可以获得 xxxx（这是 id）的全部文章了。"}]},{"type":"element","tag":"h2","props":{"id":"完整代码"},"children":[{"type":"text","value":"完整代码"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/qiyuor2/node-spider-csdn","rel":["nofollow"]},"children":[{"type":"text","value":"node-spider-csdn"}]}]}]},{"type":"element","tag":"h2","props":{"id":"参考文章"},"children":[{"type":"text","value":"参考文章"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://juejin.im/post/5b4f007fe51d4519277b9707#heading-1","rel":["nofollow"]},"children":[{"type":"text","value":"分分钟教你用 node.js 写个爬虫"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/coco1s/p/4954063.html","rel":["nofollow"]},"children":[{"type":"text","value":"【nodeJS 爬虫】前端爬虫系列 -- 小爬「博客园」"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/jiayisheji/blog/issues/7","rel":["nofollow"]},"children":[{"type":"text","value":"10 分钟教你撸一个 nodejs 爬虫系统"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jianshu.com/p/a86bd4bd48c9","rel":["nofollow"]},"children":[{"type":"text","value":"node.js 学习笔记 004:使用 eventproxy 控制并发"}]}]}]}]},"date":"2020/02/11 13:30:55","tags":["JavaScript","Node.js","爬虫","Web Crawler"],"category":"技术","summary":"最近正在学习node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。"}]},{"type":"element","tag":"h2","props":{"id":"准备工作"},"children":[{"type":"text","value":"准备工作"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"node.js 爬虫肯定要先安装"},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"环境"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个文件夹"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在该文件夹打开命令行，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm init"}]},{"type":"text","value":"初始化项目"}]}]},{"type":"element","tag":"h2","props":{"id":"正式开始"},"children":[{"type":"text","value":"正式开始"}]},{"type":"element","tag":"h3","props":{"id":"安装依赖"},"children":[{"type":"text","value":"安装依赖"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"express 用来搭建一个简单 http 服务器，也可以使用 node 原生 api"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cheerio 相当于 node 版的 jQuery，用来解析页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"superagent 用来请求目标页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"eventproxy 解决同时处理多个页面的问题"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install express cheerio superagent eventproxy "}]},{"type":"text","value":"来安装依赖包，当然你也可以用别的方法。"}]},{"type":"element","tag":"h3","props":{"id":"创建建好目录"},"children":[{"type":"text","value":"创建建好目录"}]},{"type":"element","tag":"code","props":{"code":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"创建一个-http-服务器"},"children":[{"type":"text","value":"创建一个 Http 服务器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.js"}]},{"type":"text","value":"文件中，实例化一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"对象，启动一个 Http 服务"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样就启动了一个简单的 Http 本地服务，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"后通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000"}]},{"type":"text","value":"就可以访问到这个服务器。有关 Express 的更多内容可以参考"},{"type":"element","tag":"a","props":{"href":"https://expressjs.com/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"编写csdnjs模块"},"children":[{"type":"text","value":"编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"模块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先引入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"文件并且添加路由"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后开始编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]}]},{"type":"element","tag":"h4","props":{"id":"整体结构"},"children":[{"type":"text","value":"整体结构"}]},{"type":"element","tag":"code","props":{"code":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"分析页面"},"children":[{"type":"text","value":"分析页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"整体结构写好后就要开始分析 CSDN 用户文章页面的 HTML 了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"随便找一个人的博客，经过观察发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原创文章的完整 url:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://blog.csdn.net/l1028386804/article/list/2?t=1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSDN 的文章列表是 40 篇一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分页控件是动态生成的，所以无法直接通过 HTML 解析获得"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后我们通过开发者工具查看文章列表结构，可以发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文章信息都在类名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"article-item-box"}]},{"type":"text","value":"的盒子中"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id 信息在该盒子的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data-articleid"}]},{"type":"text","value":"属性中"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一些其他的信息都很容易能查到，比如博主原创文章总数值等，可以在以后需要的时候再过来查看。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-2.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"获取所有文章页面"},"children":[{"type":"text","value":"获取所有文章页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为无法直接获得分页信息，所以我们通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"文章总数 / 每页文章数"}]},{"type":"text","value":"来获取所有的页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先获取文章的总数："}]},{"type":"element","tag":"code","props":{"code":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后利用简单的循环获取所有文章页面："}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"console.log()"}]},{"type":"text","value":"或者"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.send()"}]},{"type":"text","value":"来查看获取的网址是否正确"}]},{"type":"element","tag":"h4","props":{"id":"遍历获取所有页面的-html"},"children":[{"type":"text","value":"遍历获取所有页面的 HTML"}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"解析文章信息"},"children":[{"type":"text","value":"解析文章信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为获取到的有些文本中空格太多，所以需要用到正则表达式来去除多余的空格。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cheerio"}]},{"type":"text","value":"对于 Document 的操作和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"基本一样，所以有前端基础的可以很轻松上手。"}]},{"type":"element","tag":"code","props":{"code":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们已经获取到所有文章的信息数据，但是因为获取各个页面的文章时是并发异步进行的，所以要同时利用这些数据特殊的方法。"}]},{"type":"element","tag":"h4","props":{"id":"处理并发异步操作"},"children":[{"type":"text","value":"处理并发异步操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里我使用的是“计数器”"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"eventproxy"}]},{"type":"text","value":"，还有很多其他的方法都可以解决这个问题。"}]},{"type":"element","tag":"code","props":{"code":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，一个简单的 node 爬虫就写好了，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"启动服务后，在浏览器中输入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000/csdn/xxxx"}]},{"type":"text","value":"就可以获得 xxxx（这是 id）的全部文章了。"}]},{"type":"element","tag":"h2","props":{"id":"完整代码"},"children":[{"type":"text","value":"完整代码"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/qiyuor2/node-spider-csdn","rel":["nofollow"]},"children":[{"type":"text","value":"node-spider-csdn"}]}]}]},{"type":"element","tag":"h2","props":{"id":"参考文章"},"children":[{"type":"text","value":"参考文章"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://juejin.im/post/5b4f007fe51d4519277b9707#heading-1","rel":["nofollow"]},"children":[{"type":"text","value":"分分钟教你用 node.js 写个爬虫"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/coco1s/p/4954063.html","rel":["nofollow"]},"children":[{"type":"text","value":"【nodeJS 爬虫】前端爬虫系列 -- 小爬「博客园」"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/jiayisheji/blog/issues/7","rel":["nofollow"]},"children":[{"type":"text","value":"10 分钟教你撸一个 nodejs 爬虫系统"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jianshu.com/p/a86bd4bd48c9","rel":["nofollow"]},"children":[{"type":"text","value":"node.js 学习笔记 004:使用 eventproxy 控制并发"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"准备工作","depth":2,"text":"准备工作"},{"id":"正式开始","depth":2,"text":"正式开始","children":[{"id":"安装依赖","depth":3,"text":"安装依赖"},{"id":"创建建好目录","depth":3,"text":"创建建好目录"},{"id":"创建一个-http-服务器","depth":3,"text":"创建一个 Http 服务器"},{"id":"编写csdnjs模块","depth":3,"text":"编写csdn.js模块"}]},{"id":"完整代码","depth":2,"text":"完整代码"},{"id":"参考文章","depth":2,"text":"参考文章"}]}},"_type":"markdown","_id":"content:2020:node-spider-csdn.md","_source":"content","_file":"2020/node-spider-csdn.md","_extension":"md"},"hash":"KzAIzPVIYK"}