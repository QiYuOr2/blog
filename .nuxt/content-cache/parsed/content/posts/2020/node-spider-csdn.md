{"parsed":{"_path":"/posts/2020/node-spider-csdn","_dir":"2020","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"nodejs爬虫--抓取CSDN某用户全部文章","description":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。","excerpt":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。"}]},{"type":"element","tag":"h2","props":{"id":"准备工作"},"children":[{"type":"text","value":"准备工作"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"node.js 爬虫肯定要先安装"},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"环境"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个文件夹"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在该文件夹打开命令行，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm init"}]},{"type":"text","value":"初始化项目"}]}]},{"type":"element","tag":"h2","props":{"id":"正式开始"},"children":[{"type":"text","value":"正式开始"}]},{"type":"element","tag":"h3","props":{"id":"安装依赖"},"children":[{"type":"text","value":"安装依赖"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"express 用来搭建一个简单 http 服务器，也可以使用 node 原生 api"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cheerio 相当于 node 版的 jQuery，用来解析页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"superagent 用来请求目标页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"eventproxy 解决同时处理多个页面的问题"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install express cheerio superagent eventproxy "}]},{"type":"text","value":"来安装依赖包，当然你也可以用别的方法。"}]},{"type":"element","tag":"h3","props":{"id":"创建建好目录"},"children":[{"type":"text","value":"创建建好目录"}]},{"type":"element","tag":"code","props":{"code":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n"}]}]}]},{"type":"element","tag":"h3","props":{"id":"创建一个-http-服务器"},"children":[{"type":"text","value":"创建一个 Http 服务器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.js"}]},{"type":"text","value":"文件中，实例化一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"对象，启动一个 Http 服务"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样就启动了一个简单的 Http 本地服务，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"后通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000"}]},{"type":"text","value":"就可以访问到这个服务器。有关 Express 的更多内容可以参考"},{"type":"element","tag":"a","props":{"href":"https://expressjs.com/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"编写csdnjs模块"},"children":[{"type":"text","value":"编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"模块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先引入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"文件并且添加路由"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后开始编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]}]},{"type":"element","tag":"h4","props":{"id":"整体结构"},"children":[{"type":"text","value":"整体结构"}]},{"type":"element","tag":"code","props":{"code":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"分析页面"},"children":[{"type":"text","value":"分析页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"整体结构写好后就要开始分析 CSDN 用户文章页面的 HTML 了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"随便找一个人的博客，经过观察发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原创文章的完整 url:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://blog.csdn.net/l1028386804/article/list/2?t=1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSDN 的文章列表是 40 篇一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分页控件是动态生成的，所以无法直接通过 HTML 解析获得"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后我们通过开发者工具查看文章列表结构，可以发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文章信息都在类名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"article-item-box"}]},{"type":"text","value":"的盒子中"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id 信息在该盒子的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data-articleid"}]},{"type":"text","value":"属性中"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一些其他的信息都很容易能查到，比如博主原创文章总数值等，可以在以后需要的时候再过来查看。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-2.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"获取所有文章页面"},"children":[{"type":"text","value":"获取所有文章页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为无法直接获得分页信息，所以我们通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"文章总数 / 每页文章数"}]},{"type":"text","value":"来获取所有的页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先获取文章的总数："}]},{"type":"element","tag":"code","props":{"code":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后利用简单的循环获取所有文章页面："}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"console.log()"}]},{"type":"text","value":"或者"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.send()"}]},{"type":"text","value":"来查看获取的网址是否正确"}]},{"type":"element","tag":"h4","props":{"id":"遍历获取所有页面的-html"},"children":[{"type":"text","value":"遍历获取所有页面的 HTML"}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"h4","props":{"id":"解析文章信息"},"children":[{"type":"text","value":"解析文章信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为获取到的有些文本中空格太多，所以需要用到正则表达式来去除多余的空格。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cheerio"}]},{"type":"text","value":"对于 Document 的操作和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"基本一样，所以有前端基础的可以很轻松上手。"}]},{"type":"element","tag":"code","props":{"code":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n"}]}]}]},{"type":"element","tag":"code","props":{"code":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们已经获取到所有文章的信息数据，但是因为获取各个页面的文章时是并发异步进行的，所以要同时利用这些数据特殊的方法。"}]},{"type":"element","tag":"h4","props":{"id":"处理并发异步操作"},"children":[{"type":"text","value":"处理并发异步操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里我使用的是“计数器”"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"eventproxy"}]},{"type":"text","value":"，还有很多其他的方法都可以解决这个问题。"}]},{"type":"element","tag":"code","props":{"code":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n"}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，一个简单的 node 爬虫就写好了，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"启动服务后，在浏览器中输入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000/csdn/xxxx"}]},{"type":"text","value":"就可以获得 xxxx（这是 id）的全部文章了。"}]},{"type":"element","tag":"h2","props":{"id":"完整代码"},"children":[{"type":"text","value":"完整代码"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/qiyuor2/node-spider-csdn","rel":["nofollow"]},"children":[{"type":"text","value":"node-spider-csdn"}]}]}]},{"type":"element","tag":"h2","props":{"id":"参考文章"},"children":[{"type":"text","value":"参考文章"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://juejin.im/post/5b4f007fe51d4519277b9707#heading-1","rel":["nofollow"]},"children":[{"type":"text","value":"分分钟教你用 node.js 写个爬虫"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/coco1s/p/4954063.html","rel":["nofollow"]},"children":[{"type":"text","value":"【nodeJS 爬虫】前端爬虫系列 -- 小爬「博客园」"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/jiayisheji/blog/issues/7","rel":["nofollow"]},"children":[{"type":"text","value":"10 分钟教你撸一个 nodejs 爬虫系统"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jianshu.com/p/a86bd4bd48c9","rel":["nofollow"]},"children":[{"type":"text","value":"node.js 学习笔记 004:使用 eventproxy 控制并发"}]}]}]}]},"date":"2020/02/11 13:30:55","tags":["JavaScript","Node.js","爬虫","Web Crawler"],"category":"技术","summary":"最近正在学习node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"最近正在学习 node.js，就像搞一些东西来玩玩，于是这个简单的爬虫就诞生了。"}]},{"type":"element","tag":"h2","props":{"id":"准备工作"},"children":[{"type":"text","value":"准备工作"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"node.js 爬虫肯定要先安装"},{"type":"element","tag":"a","props":{"href":"https://nodejs.org/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"node.js"}]},{"type":"text","value":"环境"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"创建一个文件夹"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"在该文件夹打开命令行，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm init"}]},{"type":"text","value":"初始化项目"}]}]},{"type":"element","tag":"h2","props":{"id":"正式开始"},"children":[{"type":"text","value":"正式开始"}]},{"type":"element","tag":"h3","props":{"id":"安装依赖"},"children":[{"type":"text","value":"安装依赖"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"express 用来搭建一个简单 http 服务器，也可以使用 node 原生 api"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"cheerio 相当于 node 版的 jQuery，用来解析页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"superagent 用来请求目标页面"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"eventproxy 解决同时处理多个页面的问题"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"直接使用"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"npm install express cheerio superagent eventproxy "}]},{"type":"text","value":"来安装依赖包，当然你也可以用别的方法。"}]},{"type":"element","tag":"h3","props":{"id":"创建建好目录"},"children":[{"type":"text","value":"创建建好目录"}]},{"type":"element","tag":"code","props":{"code":"node-spider-csdn\n├─ .gitignore\n├─ node_modules\n├─ README.md\n├─ index.js             项目入口\n├─ package-lock.json\n├─ package.json\n└─ routes\n  └─ csdn.js            爬虫主要代码\n","language":"shell"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"node-spider-csdn"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ .gitignore"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ node_modules"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ README.md"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ index.js             项目入口"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ package-lock.json"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"├─ package.json"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"└─ routes"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  └─ csdn.js            爬虫主要代码"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"创建一个-http-服务器"},"children":[{"type":"text","value":"创建一个 Http 服务器"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"index.js"}]},{"type":"text","value":"文件中，实例化一个"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"express"}]},{"type":"text","value":"对象，启动一个 Http 服务"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\n\nconst app = express();\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'express'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5902e6"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  console."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'running in http://127.0.0.1:3000'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样就启动了一个简单的 Http 本地服务，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"后通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000"}]},{"type":"text","value":"就可以访问到这个服务器。有关 Express 的更多内容可以参考"},{"type":"element","tag":"a","props":{"href":"https://expressjs.com/zh-cn/","rel":["nofollow"]},"children":[{"type":"text","value":"官方文档"}]},{"type":"text","value":"。"}]},{"type":"element","tag":"h3","props":{"id":"编写csdnjs模块"},"children":[{"type":"text","value":"编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"模块"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"先引入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]},{"type":"text","value":"文件并且添加路由"}]},{"type":"element","tag":"code","props":{"code":"const express = require('express');\nconst csdn = require('./routes/csdn.js');\n\nconst app = express();\n\napp.use(csdn);\n\napp.listen(3000, function () {\n  console.log('running in http://127.0.0.1:3000');\n});\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'express'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"csdn"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'./routes/csdn.js'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"app"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5902e6"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"use"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(csdn);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"app."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"listen"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"3000"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" () {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  console."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'running in http://127.0.0.1:3000'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后开始编写"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"csdn.js"}]}]},{"type":"element","tag":"h4","props":{"id":"整体结构"},"children":[{"type":"text","value":"整体结构"}]},{"type":"element","tag":"code","props":{"code":"// 引入需要的第三方包\nconst cheerio = require('cheerio');\nconst superagent = require('superagent');\nconst express = require('express');\nconst eventproxy = require('eventproxy');\n\nconst router = express.Router(); // 挂载路由\nconst ep = new eventproxy();\n\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name; // 用户id\n  // 具体实现...\n});\n\n// 将router暴露出去\nmodule.exports = router;\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 引入需要的第三方包"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"cheerio"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'cheerio'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"superagent"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'superagent'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"express"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'express'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"eventproxy"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-22595c"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-134242"},"children":[{"type":"text","value":"'eventproxy'"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" express."}]},{"type":"element","tag":"span","props":{"class":"ct-5902e6"},"children":[{"type":"text","value":"Router"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"(); "}]},{"type":"element","tag":"span","props":{"class":"ct-0bc6c0"},"children":[{"type":"text","value":"// 挂载路由"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"ep"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5902e6"},"children":[{"type":"text","value":"eventproxy"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"router."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'/csdn/:name'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" req.params.name; "}]},{"type":"element","tag":"span","props":{"class":"ct-0bc6c0"},"children":[{"type":"text","value":"// 用户id"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 具体实现..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 将router暴露出去"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"module"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"exports"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" router;"}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"分析页面"},"children":[{"type":"text","value":"分析页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"整体结构写好后就要开始分析 CSDN 用户文章页面的 HTML 了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"随便找一个人的博客，经过观察发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"原创文章的完整 url:"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"https://blog.csdn.net/l1028386804/article/list/2?t=1"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"CSDN 的文章列表是 40 篇一页"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"分页控件是动态生成的，所以无法直接通过 HTML 解析获得"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-1.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后我们通过开发者工具查看文章列表结构，可以发现："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"文章信息都在类名为"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"article-item-box"}]},{"type":"text","value":"的盒子中"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"id 信息在该盒子的"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"data-articleid"}]},{"type":"text","value":"属性中"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"还有一些其他的信息都很容易能查到，比如博主原创文章总数值等，可以在以后需要的时候再过来查看。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://gcore.jsdelivr.net/gh/qiyuor2/blog-image/img/someoneblog-2.png"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"获取所有文章页面"},"children":[{"type":"text","value":"获取所有文章页面"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为无法直接获得分页信息，所以我们通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"文章总数 / 每页文章数"}]},{"type":"text","value":"来获取所有的页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"首先获取文章的总数："}]},{"type":"element","tag":"code","props":{"code":"/**\n * 获取总文章数目\n * @param {String} url 页面路径\n * @param {Function} callback 回调\n */\nlet getArticleNum = function (url, callback) {\n  superagent.get(url).end(function (err, html) {\n    if (err) {\n      console.log(`err = ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n    let num = parseInt($('.data-info dl').first().attr('title'));\n\n    callback(num);\n  });\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"/**"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * 获取总文章数目"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"@param"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-894869"},"children":[{"type":"text","value":"{String}"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" 页面路径"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"@param"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-894869"},"children":[{"type":"text","value":"{Function}"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" 回调"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"getArticleNum"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"url"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  superagent."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(url)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" (err) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      console."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`err = "}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" $ "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" cheerio."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(html.text);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" num "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"parseInt"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.data-info dl'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"attr"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'title'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"callback"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(num);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"然后利用简单的循环获取所有文章页面："}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = []; // 保存要抓取的页面\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n    // ...\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"router."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'/csdn/:name'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" req.params.name;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"getArticleNum"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`https://blog.csdn.net/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pages "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" []; "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 保存要抓取的页面"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pageNum "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(num "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"40"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 计算一共有多少页面"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pageNum; i"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      pages."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`https://blog.csdn.net/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/article/list/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"?t=1`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以通过"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"console.log()"}]},{"type":"text","value":"或者"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"res.send()"}]},{"type":"text","value":"来查看获取的网址是否正确"}]},{"type":"element","tag":"h4","props":{"id":"遍历获取所有页面的-html"},"children":[{"type":"text","value":"遍历获取所有页面的 HTML"}]},{"type":"element","tag":"code","props":{"code":"// ...\nrouter.get('/csdn/:name', function (req, res) {\n  const name = req.params.name;\n\n  getArticleNum(`https://blog.csdn.net/${name}`, function (num) {\n    let pages = [];\n    let articleData = []; // 保存所有文章数据\n\n    let pageNum = Math.ceil(num / 40); // 计算一共有多少页面\n\n    for (let i = 1; i <= pageNum; i++) {\n      pages.push(`https://blog.csdn.net/${name}/article/list/${i}?t=1`);\n    }\n\n    // 获取所有页面的文章信息\n    pages.forEach(function (targetUrl) {\n      superagent.get(targetUrl).end(function (err, html) {\n        if (err) {\n          console.log(`err ${err}`);\n        }\n        let $ = cheerio.load(html.text);\n\n        // 当前页面的文章列表\n        let articlesHtml = $('.article-list .article-item-box');\n\n        // 遍历当前页的文章列表\n        for (let i = 0; i < articlesHtml.length; i++) {\n          // 解析获取文章信息\n          // push到articleData中\n          // ...\n        }\n      });\n    });\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"router."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'/csdn/:name'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"req"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"res"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" req.params.name;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"getArticleNum"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`https://blog.csdn.net/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"num"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pages "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" [];"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" articleData "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" []; "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 保存所有文章数据"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pageNum "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"Math"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-3b59ed"},"children":[{"type":"text","value":"ceil"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(num "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"40"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"); "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 计算一共有多少页面"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"<="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" pageNum; i"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      pages."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`https://blog.csdn.net/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"name"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/article/list/"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"?t=1`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 获取所有页面的文章信息"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    pages."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"targetUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      superagent."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(targetUrl)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" (err) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"          console."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`err "}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" $ "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" cheerio."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(html.text);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 当前页面的文章列表"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" articlesHtml "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.article-list .article-item-box'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 遍历当前页的文章列表"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-df52c0"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" articlesHtml."}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 解析获取文章信息"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// push到articleData中"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"          "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"        }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]}]}]}]},{"type":"element","tag":"h4","props":{"id":"解析文章信息"},"children":[{"type":"text","value":"解析文章信息"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"因为获取到的有些文本中空格太多，所以需要用到正则表达式来去除多余的空格。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"cheerio"}]},{"type":"text","value":"对于 Document 的操作和"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"jQuery"}]},{"type":"text","value":"基本一样，所以有前端基础的可以很轻松上手。"}]},{"type":"element","tag":"code","props":{"code":"/**\n * 解析html字符串，获取文章信息\n * @param {String} html 包含文章信息的html\n * @param {Number} index 文章索引\n */\nlet analysisHtml = function (html, index) {\n  return {\n    id: html.eq(index).attr('data-articleid'),\n    title: html.eq(index).find('h4 a').text().replace(/\\s+/g, '').slice(2),\n    link: html.eq(index).find('a').attr('href'),\n    abstract: html.eq(index).find('.content a').text().replace(/\\s+/g, ''),\n    shared_time: html\n      .eq(index)\n      .find('.info-box .date')\n      .text()\n      .replace(/\\s+/, ''),\n    read_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .first()\n      .text()\n      .replace(/\\s+/, ''),\n    comment_count: html\n      .eq(index)\n      .find('.info-box .read-num .num')\n      .last()\n      .text()\n      .replace(/\\s+/, ''),\n  };\n};\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"/**"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * 解析html字符串，获取文章信息"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"@param"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-894869"},"children":[{"type":"text","value":"{String}"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" 包含文章信息的html"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" * "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"@param"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-894869"},"children":[{"type":"text","value":"{Number}"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" 文章索引"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":" */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"analysisHtml"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"index"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    id: html."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"attr"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'data-articleid'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    title: html."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'h4 a'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"slice"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"2"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    link: html."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'a'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"attr"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'href'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    abstract: html."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.content a'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"g"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    shared_time: html"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.info-box .date'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    read_count: html"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.info-box .read-num .num'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"first"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    comment_count: html"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"eq"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(index)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"find"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.info-box .read-num .num'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":")"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"last"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"text"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"\\s"}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"''"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  };"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"element","tag":"code","props":{"code":"// ...\n// 遍历当前页的文章列表\nfor (let i = 0; i < articlesHtml.length; i++) {\n  let article = analysisHtml(articlesHtml, i);\n  articleData.push(article);\n  // ...\n}\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 遍历当前页的文章列表"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-df52c0"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" articlesHtml."}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" article "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"analysisHtml"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(articlesHtml, i);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  articleData."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(article);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们已经获取到所有文章的信息数据，但是因为获取各个页面的文章时是并发异步进行的，所以要同时利用这些数据特殊的方法。"}]},{"type":"element","tag":"h4","props":{"id":"处理并发异步操作"},"children":[{"type":"text","value":"处理并发异步操作"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这里我使用的是“计数器”"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"eventproxy"}]},{"type":"text","value":"，还有很多其他的方法都可以解决这个问题。"}]},{"type":"element","tag":"code","props":{"code":"// ...\npages.forEach(function (targetUrl) {\n  superagent.get(targetUrl).end(function (err, html) {\n    if (err) {\n      console.log(`err ${err}`);\n    }\n    let $ = cheerio.load(html.text);\n\n    let articlesHtml = $('.article-list .article-item-box');\n\n    for (let i = 0; i < articlesHtml.length; i++) {\n      let article = analysisHtml(articlesHtml, i);\n      articleData.push(article);\n\n      ep.emit('blogArtc', article); // 计数器\n    }\n  });\n});\n\n// 当所有'blogArtc'完成后，触发回调\nep.after('blogArtc', num, function (data) {\n  res.json({\n    status_code: 0,\n    data: data,\n  });\n});\n// ...\n","language":"js"},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"pages."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"forEach"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"targetUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  superagent."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"get"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(targetUrl)."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"end"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"html"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" (err) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      console."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`err "}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"${"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-50296f"},"children":[{"type":"text","value":"}"}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"`"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" $ "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" cheerio."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"load"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(html.text);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" articlesHtml "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"$"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'.article-list .article-item-box'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-1301c7"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-df52c0"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i "}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"<"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":" articlesHtml."}]},{"type":"element","tag":"span","props":{"class":"ct-5240d0"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":"; i"}]},{"type":"element","tag":"span","props":{"class":"ct-4cd4ee"},"children":[{"type":"text","value":"++"}]},{"type":"element","tag":"span","props":{"class":"ct-1fe114"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" article "}]},{"type":"element","tag":"span","props":{"class":"ct-202941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"analysisHtml"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(articlesHtml, i);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      articleData."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"push"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"(article);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"      ep."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"emit"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'blogArtc'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", article); "}]},{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 计数器"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// 当所有'blogArtc'完成后，触发回调"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"ep."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"after"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-453f1c"},"children":[{"type":"text","value":"'blogArtc'"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":", num, "}]},{"type":"element","tag":"span","props":{"class":"ct-e2bbd5"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-d36347"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  res."}]},{"type":"element","tag":"span","props":{"class":"ct-96f5fd"},"children":[{"type":"text","value":"json"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    status_code: "}]},{"type":"element","tag":"span","props":{"class":"ct-9b5eb2"},"children":[{"type":"text","value":"0"}]},{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"    data: data,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-7ace51"},"children":[{"type":"text","value":"});"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-346a3f"},"children":[{"type":"text","value":"// ..."}]}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这样，一个简单的 node 爬虫就写好了，执行"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"node index.js"}]},{"type":"text","value":"启动服务后，在浏览器中输入"},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"http://127.0.0.1:3000/csdn/xxxx"}]},{"type":"text","value":"就可以获得 xxxx（这是 id）的全部文章了。"}]},{"type":"element","tag":"h2","props":{"id":"完整代码"},"children":[{"type":"text","value":"完整代码"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/qiyuor2/node-spider-csdn","rel":["nofollow"]},"children":[{"type":"text","value":"node-spider-csdn"}]}]}]},{"type":"element","tag":"h2","props":{"id":"参考文章"},"children":[{"type":"text","value":"参考文章"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://juejin.im/post/5b4f007fe51d4519277b9707#heading-1","rel":["nofollow"]},"children":[{"type":"text","value":"分分钟教你用 node.js 写个爬虫"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.cnblogs.com/coco1s/p/4954063.html","rel":["nofollow"]},"children":[{"type":"text","value":"【nodeJS 爬虫】前端爬虫系列 -- 小爬「博客园」"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/jiayisheji/blog/issues/7","rel":["nofollow"]},"children":[{"type":"text","value":"10 分钟教你撸一个 nodejs 爬虫系统"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.jianshu.com/p/a86bd4bd48c9","rel":["nofollow"]},"children":[{"type":"text","value":"node.js 学习笔记 004:使用 eventproxy 控制并发"}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-df52c0{color:#0550AE}.ct-50296f{color:#0A3069}.ct-894869{color:#953800}.ct-202941{color:#CF222E}.ct-3b59ed{color:#0550AE}.ct-d36347{color:#953800}.ct-0bc6c0{color:#6E7781}.ct-346a3f{color:#6E7781}.ct-453f1c{color:#0A3069}.ct-e2bbd5{color:#CF222E}.ct-9b5eb2{color:#0550AE}.ct-96f5fd{color:#8250DF}.ct-5902e6{color:#8250DF}.ct-134242{color:#0A3069}.ct-22595c{color:#0550AE}.ct-4cd4ee{color:#CF222E}.ct-5240d0{color:#0550AE}.ct-1fe114{color:#24292F}.ct-1301c7{color:#CF222E}.ct-7ace51{color:#24292F}.sepia .ct-7ace51{color:#F8F8F2}.dark .ct-7ace51{color:#C9D1D9}.dark .ct-1301c7{color:#FF7B72}.sepia .ct-1301c7{color:#66D9EF}.dark .ct-1fe114{color:#C9D1D9}.sepia .ct-1fe114{color:#F8F8F2}.dark .ct-5240d0{color:#79C0FF}.sepia .ct-5240d0{color:#F8F8F2}.dark .ct-4cd4ee{color:#FF7B72}.sepia .ct-4cd4ee{color:#F92672}.dark .ct-22595c{color:#79C0FF}.sepia .ct-22595c{color:#66D9EF}.dark .ct-134242{color:#A5D6FF}.sepia .ct-134242{color:#E6DB74}.dark .ct-5902e6{color:#D2A8FF}.sepia .ct-5902e6{color:#A6E22E}.sepia .ct-96f5fd{color:#A6E22E}.dark .ct-96f5fd{color:#D2A8FF}.sepia .ct-9b5eb2{color:#AE81FF}.dark .ct-9b5eb2{color:#79C0FF}.sepia .ct-e2bbd5{color:#66D9EF}.dark .ct-e2bbd5{color:#FF7B72}.sepia .ct-453f1c{color:#E6DB74}.dark .ct-453f1c{color:#A5D6FF}.sepia .ct-346a3f{color:#88846F}.dark .ct-346a3f{color:#8B949E}.dark .ct-0bc6c0{color:#8B949E}.sepia .ct-0bc6c0{color:#88846F}.sepia .ct-d36347{color:#FD971F}.dark .ct-d36347{color:#FFA657}.sepia .ct-3b59ed{color:#66D9EF}.dark .ct-3b59ed{color:#79C0FF}.sepia .ct-202941{color:#F92672}.dark .ct-202941{color:#FF7B72}.sepia .ct-894869{color:#A6E22E}.dark .ct-894869{color:#FFA657}.sepia .ct-50296f{color:#F92672}.dark .ct-50296f{color:#A5D6FF}.dark .ct-df52c0{color:#79C0FF}.sepia .ct-df52c0{color:#AE81FF}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"准备工作","depth":2,"text":"准备工作"},{"id":"正式开始","depth":2,"text":"正式开始","children":[{"id":"安装依赖","depth":3,"text":"安装依赖"},{"id":"创建建好目录","depth":3,"text":"创建建好目录"},{"id":"创建一个-http-服务器","depth":3,"text":"创建一个 Http 服务器"},{"id":"编写csdnjs模块","depth":3,"text":"编写csdn.js模块"}]},{"id":"完整代码","depth":2,"text":"完整代码"},{"id":"参考文章","depth":2,"text":"参考文章"}]}},"_type":"markdown","_id":"content:posts:2020:node-spider-csdn.md","_source":"content","_file":"posts/2020/node-spider-csdn.md","_extension":"md"},"hash":"E8QFuvEi6E"}